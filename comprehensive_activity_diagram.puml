@startuml UniNest_Comprehensive_Activity_Diagram

!theme plain
title "UniNest Platform - Comprehensive Activity Diagram\nShowcasing Complex Solutions & Innovative Features"

|#LightBlue|Web Scraping Module|
start
:ðŸ¤– **Automated Web Scraping System**
Playwright-based scraping from external sources;
note right
  **Complex Solution #1: Multi-Source Data Aggregation**
  â€¢ Playwright automation framework
  â€¢ Concurrent scraping from Tayara & Immobilier
  â€¢ Browser context management
  â€¢ Anti-detection mechanisms
  â€¢ Pagination handling (up to 60 pages)
  â€¢ JSON data extraction from __NEXT_DATA__
end note

:Initialize Browser Manager
Create Playwright context;

:Navigate to External Property Sites
(Tayara.tn, Immobilier.com.tn);

:Extract Property Data
â€¢ Title, Price, Location
â€¢ Images, Description
â€¢ Contact Information
â€¢ Property Features;

:Apply Data Validation
& Geocoding Services;

:Store in PostgreSQL Database
with SourceType = SCRAPED;

|#LightGreen|ML Compatibility Engine|

:ðŸ§  **Advanced Compatibility Algorithm**
Multi-criteria ML-based scoring;
note right
  **Complex Solution #2: Intelligent Matching**
  â€¢ Academic compatibility (University + Field)
  â€¢ Lifestyle preferences matching
  â€¢ Budget optimization scoring
  â€¢ Location proximity calculation
  â€¢ Age compatibility assessment
  â€¢ Weighted scoring algorithm (40% academic, 25% lifestyle, etc.)
end note

:Calculate University Compatibility
(40% weight - Primary factor);

:Analyze Field of Study Similarity
(25% weight - Secondary factor);

:Evaluate Lifestyle Preferences
Using Jaccard similarity;

:Assess Budget Compatibility
With comfort ratio calculation;

:Generate Compatibility Score
(0.0 to 1.0 scale);

|#LightCoral|Student Discovery Workflow|

:ðŸ‘¨â€ðŸŽ“ **Student Accesses Platform**;

if (User authenticated?) then (yes)
  :Access Personalized Dashboard;
else (no)
  :Register/Login Process;
  :Complete Academic Profile
  â€¢ University, Field of Study
  â€¢ Age, Lifestyle Preferences
  â€¢ Budget Range, Location Preferences;
endif

:ðŸ” **Property Discovery System**;

fork
  :Browse Map-based Interface
  with Geospatial Filtering;
fork again
  :Use Advanced Search Filters
  â€¢ Location radius
  â€¢ Price range
  â€¢ Property type
  â€¢ Amenities;
fork again
  :Access ML-Powered Recommendations
  Based on user profile;
end fork

:Select Property of Interest;

|#LightYellow|Inquiry Management System|

:ðŸ“ **Create Property Inquiry**;
note right
  **Complex Solution #3: Multi-User Communication**
  â€¢ Real-time WebSocket notifications
  â€¢ Email integration
  â€¢ Status tracking & automation
  â€¢ Deal closure with cascade effects
  â€¢ Conflict resolution for multiple inquiries
end note

:Fill Inquiry Form
â€¢ Personal message
â€¢ Contact information
â€¢ Viewing preferences;

:Submit Inquiry to Owner;

|#Orange|Owner Response Workflow|

:ðŸ“§ **Owner Receives Notification**
Email + WebSocket alert;

:Owner Reviews Inquiry
in Dashboard;

if (Multiple inquiries for same property?) then (yes)
  :View All Competing Inquiries
  with Student Profiles;
  
  :Evaluate Students
  â€¢ Review messages
  â€¢ Check compatibility scores
  â€¢ Consider application timing;
  
  :Select Preferred Student;
  
  :ðŸ¤ **Close Deal with Chosen Student**;
  note right
    **Complex Solution #4: Cascade Effect Management**
    â€¢ Automatically notify rejected students
    â€¢ Update property status to RENTED
    â€¢ Remove from search results
    â€¢ Update all related inquiries
    â€¢ Send appropriate notifications
  end note
  
  :Notify Other Students
  "Property No Longer Available";
  
else (no)
  :Reply to Single Inquiry;
endif

|#LightPink|Roommate Matching System|

:ðŸ  **Student Seeks Roommate**;

:Create Roommate Announcement
â€¢ Property requirements
â€¢ Lifestyle preferences
â€¢ Budget constraints
â€¢ Personal traits;

:ðŸ¤– **ML Recommendation Engine**
Processes announcement;

fork
  :Generate Personalized Recommendations
  Based on compatibility algorithm;
fork again
  :Create High-Quality Matches
  (>70% compatibility);
fork again
  :Find Compatible Students
  Same university/field priority;
fork again
  :Show All Available Announcements
  With compatibility scores;
end fork

:Student Reviews Recommendations
with Compatibility Indicators;

:Send Connection Request
to Compatible Roommate;

|#LightCyan|Real-time Communication|

:ðŸ’¬ **WebSocket Messaging System**;
note right
  **Complex Solution #5: Real-time Features**
  â€¢ STOMP protocol implementation
  â€¢ User-specific message queues
  â€¢ Typing indicators
  â€¢ Message status tracking
  â€¢ Cross-platform synchronization
end note

:Establish WebSocket Connection;

:Exchange Messages
in Real-time;

:Coordinate Property Viewing
& Roommate Meeting;

|#LightGray|Admin Analytics & Monitoring|

:ðŸ“Š **Admin Dashboard Analytics**;

fork
  :Monitor Scraping Performance
  â€¢ Success rates
  â€¢ Data quality metrics
  â€¢ Source reliability;
fork again
  :Track User Engagement
  â€¢ Compatibility score effectiveness
  â€¢ Inquiry conversion rates
  â€¢ Platform usage patterns;
fork again
  :Manage System Health
  â€¢ Database performance
  â€¢ WebSocket connections
  â€¢ Email delivery status;
end fork

:Generate Comprehensive Reports
for Platform Optimization;

|#LightBlue|Data Integration & Sync|

:ðŸ”„ **Automated Data Synchronization**;
note right
  **Complex Solution #6: Data Management**
  â€¢ Duplicate detection algorithms
  â€¢ Data quality validation
  â€¢ Geocoding integration
  â€¢ Image processing & storage
  â€¢ Database optimization
end note

:Validate & Deduplicate
Scraped Properties;

:Geocode Addresses
using LocationIQ API;

:Optimize Database Indexes
for Geospatial Queries;

:Update Search Results
with Fresh Data;

stop

note bottom
  **Key Innovations Demonstrated:**
  1. **Automated Web Scraping** - Playwright-based multi-source data aggregation
  2. **ML Compatibility Engine** - Multi-criteria academic & lifestyle matching
  3. **Real-time Communication** - WebSocket-based messaging & notifications
  4. **Intelligent Recommendations** - Personalized property & roommate suggestions
  5. **Complex Workflow Management** - Multi-user inquiry handling with cascade effects
  6. **Geospatial Integration** - Map-based discovery with proximity calculations
  
  **Technical Stack:**
  â€¢ Spring Boot 3.x with PostgreSQL
  â€¢ Angular 17+ with TypeScript
  â€¢ Playwright for web automation
  â€¢ WebSocket/STOMP for real-time features
  â€¢ JWT authentication & role-based security
  â€¢ PostGIS for geospatial operations
end note

@enduml 