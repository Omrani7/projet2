@startuml
title "Reference: Property List Interaction"

!define USER_COLOR #E3F2FD
!define FRONTEND_COLOR #F3E5F5
!define BACKEND_COLOR #E8F5E9
!define MAP_COLOR #FFF3E0

actor "Student/User" as User
participant "Angular Frontend\n(Discovery Page)" as Frontend
participant "FilterBarComponent" as FilterBar
participant "PropertyListComponent" as PropertyList
participant "MapDisplayComponent" as MapComponent

box "Backend Services"
    participant "PropertyListingController" as Controller
    participant "PropertyService" as Service
    participant "InstituteService" as InstituteService
    participant "Database" as DB
end box

== Property List Interaction ==

User -> PropertyList: 58. Click on property card in list
activate PropertyList

PropertyList -> Frontend: 59. Emit propertySelected(propertyId)
activate Frontend

Frontend -> MapComponent: 60. Update selectedPropertyId
activate MapComponent

MapComponent -> MapComponent: 61. Find property pin on map
MapComponent -> MapComponent: 62. Animate to property location
MapComponent -> MapComponent: 63. Show property popup
MapComponent -> MapComponent: 64. Highlight selected pin

MapComponent --> User: 65. Map animates to property with popup
deactivate MapComponent

deactivate PropertyList
deactivate Frontend

@enduml 